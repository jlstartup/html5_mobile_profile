<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Profile Edit</title>
    <link rel="shortcut icon" href="images/ico/favicon.ico">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <link href="css/prettyPhoto.css" rel="stylesheet">
    <link href="css/animate.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
</head><!--/head-->
<body ng-app="profileApp" ng-controller="profileCtrl">
    <!--header-->
    <header class="navbar navbar-inverse navbar-fixed-top wet-asphalt" role="banner">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <button type="button" class="navbar-action" onclick="window.open('profile.html', '_self')">Save</button>
                <h1>Profile</h1>
            </div>
            <div class="collapse navbar-collapse">
                <ul class="nav navbar-nav navbar-left">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about-us.html">About Us</a></li>
                    <li><a href="services.html">Services</a></li>
                    <li><a href="portfolio.html">Portfolio</a></li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Pages <i class="icon-angle-down"></i></a>
                        <ul class="dropdown-menu">
                            <li class="active"><a href="career.html">Career</a></li>
                            <li><a href="blog-item.html">Blog Single</a></li>
                            <li><a href="faq.html">FAQ</a></li>
                            <li><a href="pricing.html">Pricing</a></li>
                            <li><a href="404.html">404</a></li>
                            <li><a href="registration.html">Registration</a></li>
                            <li class="divider"></li>
                            <li><a href="privacy.html">Privacy Policy</a></li>
                            <li><a href="terms.html">Terms of Use</a></li>
                        </ul>
                    </li>
                    <li><a href="blog.html">Blog</a></li> 
                    <li><a href="contact-us.html">Contact</a></li>
                </ul>
            </div>
        </div>
    </header><!--/header-->
    <section id="profile">
        <div class="panel panel-default personal-info">
            <div class="panel-heading text-dark">
                <h4>
                    <strong>{{profile.firstname}} {{profile.lastname}}</strong>
                </h4>
            </div>
            <div class="panel-body">
                <div class="row">
                    <div class="col-xs-4" style="margin-bottom: 0px; padding-right: 0px;">
                        <div class="col-xs-12 photo">
                            <img ng-src="{{profile.profile_img}}" id="profile_img"/>
                            <input type="file" name="profile_img" style="display: none;" id="profile_img_upload"/>
                            <button class="btn btn-primary" id="profile_img_add" ng-hide="profile.profile_img_exist" ng-click="addProfileImage();"><i class="icon-edit"></i></button>
                            <button class="btn btn-danger" id="profile_img_delete" ng-show="profile.profile_img_exist" ng-click="removeProfileImage();"><i class="icon-remove"></i></button>
                        </div>
                    </div>
                    <div class="col-xs-8" style="margin-bottom: 0px;">
                        <div class="row">
                            <div class="col-xs-12">
                                <button class="col-xs-12 btn btn-default"><i class="cg-icon-idea"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{profile.idea_count}} Ideas</button>
                            </div>
                            <div class="col-xs-12">
                                <button class="col-xs-12 btn btn-default"><i class="cg-icon-like"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{profile.like_count}} Likes</button>
                            </div>
                            <div class="col-xs-12">
                                <button class="col-xs-12 btn btn-default"><i class="cg-icon-collaboration"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{profile.collaboration_count}} Collaborations</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="panel panel-default categories">
            <div class="panel-heading">
                <h4 class="panel-title text-muted">
                    Categories
                </h4>
            </div>
            <div class="panel-body">
                <div class="row">
                    <div class="category-item" ng-repeat="category in profile.categories track by $index">{{category}} <i class="action-remove icon-minus-sign" ng-click="deleteCategory($index)"></i></div>
                    <div class="category-item"><input type="text" ng-model="adding_category" placeholder="Add Category"/> <i class="action-add icon-plus-sign" ng-click="addCategory()"></i></div>
                </div>
            </div>
        </div>
        <div class="panel panel-default about">
            <div class="panel-heading">
                <h4 class="panel-title text-muted">
                    ABOUT ME
                </h4>
            </div>
            <div class="panel-body">
                <strong><textarea ng-model="profile.about"></textarea></strong>
            </div>
            <div class="panel-footer text-center">
                <a href="#" class="panel-title"><strong>Read More</strong></a>
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title text-muted">
                    MY IDEAS
                </h4>
            </div>
        </div>

        <div class="panel panel-default ideas" ng-repeat="idea in profile.ideas track by $index">
            <div class="panel-body">
                <div class="row">
                    <div class="col-xs-5">
                        <div class="col-xs-12 picture">
                            <img ng-src="{{idea.content_img}}" />
                        </div>
                    </div>
                    <div class="col-xs-7 description">
                        <h4>New Scolar Panel Roof for a School in Jirru</h4>
                        <div>
                            <div class="cg-icon-location" style="height: 17px; width: 22px; float:left;margin-top:5px">
                            </div>
                            <div><h5 class="text-muted">{{idea.location_city}} {{idea.location_state}}, {{idea.location_country}}</h5></div>
                        </div>
                        <div class="row">
                            <div class="col-xs-4">
                                <strong><i class="cg-icon-people"></i>{{idea.collaborations}}</strong>
                            </div>
                            <div class="col-xs-4">
                                <strong><i class="cg-icon-comment"></i>{{idea.comments}}</strong>
                            </div>
                            <div class="col-xs-4">
                                <strong><i class="cg-icon-favourite"></i>{{idea.favourites}}</strong>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <footer id="footer">
        <div class="tabs tabs-icon-top">
            <div class="tab-item">
                <div>
                    <a class="active"><i class="icon-home"></i><br>Home</a>
                </div>
            </div>
            <div class="tab-item">
                <div>
                    <a><i class="icon-search"></i><br>Search</a>
                </div>
            </div>
            <div class="tab-item round">
                <div>
                    <a><i class="icon-edit"></i><br>Create</a>
                </div>
            </div>
            <div class="tab-item">
                <div>
                    <a><i class="icon-envelope-alt"><span class="badge bg-danger">3</span></i><br> Message</a>
                </div>
            </div>
            <div class="tab-item">
                <div>
                    <a><i class="icon-user"></i><br>My Profile</a>
                </div>
            </div>
        </div>
    </footer>

    <script src="js/jquery.js"></script>
    <script src="js/angular.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.prettyPhoto.js"></script>
    <script src="js/jquery.isotope.min.js"></script>
    <script src="js/main.js"></script>

    <script>
        var app = angular.module('profileApp', []);
        app.controller('profileCtrl', function($scope, $http) {
            $scope.adding_category='';
            $http.get("profile.json").success(function(response) {
                $scope.profile=response;
            });

            $scope.addCategory = function() {
                if($scope.adding_category != '') {
                    $scope.profile.categories.push($scope.adding_category);
                    $scope.adding_category='';
                }
            }

            $scope.deleteCategory = function($index) {
                if($index>=0 && $index<$scope.profile.categories.length) {
                    $scope.profile.categories.splice($index, 1);
                }
            }

            $scope.addProfileImage = function() {
                $('#profile_img_upload').trigger('click');
            }

            $scope.removeProfileImage = function() {
                $('#profile_img').attr('src', '');
                $('#profile_img_upload').val("");
                $scope.profile.profile_img_exist = false;
            }
        });

        $(function () {
            $('#profile_img_upload').bind('change', function() {
                if (this.files && this.files[0]) {
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        $('#profile_img').attr('src', e.target.result);
                        // $('#profile_img_add').hide();
                        // $('#profile_img_delete').show();
                        var appElement = document.querySelector('[ng-app=profileApp]');
                        var $scope = angular.element(appElement).scope();
                        $scope.$apply(function() {
                            $scope.profile.profile_img_exist = true;
                        });
                    }
                    reader.readAsDataURL(this.files[0]);
                }
            });
        })
    </script>
</body>